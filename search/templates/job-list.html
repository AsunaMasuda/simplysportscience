{% extends 'base.html' %}

{% block job_wrapper_id %}job-list-wrapper{% endblock %}

{% block banner %}
<div class="d-flex align-items-center justify-content-center mt-5">
    <div class="container text-light">
        <div class="row justify-content-center py-5">
            <div class="col col-12 text-center">
                <h3>{{ page_title }}</h3>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col col-12 justify-content-center">
                <form id=”search” action="{% url 'search_results' %}" method="GET">
                    <div class="input-group justify-content-center mb-3 d-block d-md-flex">
                        <div class="input-group-prepend mr-md-3 d-block d-md-flex">
                            <h5 class="d-md-none">Job title, keywords, or company</h5>
                            <input type="text" class="form-control" placeholder="Job title" aria-label="job title"
                                aria-describedby="job-title-input" id="job-title" name="job-title" />
                        </div>
                        <h5 class="d-md-none mt-5 mt-md-0">City, region, or country</h5>
                        <input class="form-control" type="search" id="address-input" placeholder="Location"
                            name="location" />
                        <h5 class="d-md-none mt-5 mt-md-0">Full time, part time etc.</h5>
                        <div class="input-group-append mt-md-0 ml-md-3">
                            <select name="employment-type" class="selectpicker show-tick" data-title="Filter" multiple>
                                <option value="Full Time">Full time</option>
                                <option value="Part Time">Part time</option>
                                <option value="Contract">Contract</option>
                                <option value="Internship">Internship</option>
                                <option value="Apprenticeship">Apprenticeship</option>
                                <option value="Volunteer">Volunteer</option>
                            </select>
                        </div>
                        <div class="input-group-append my-5 my-md-0 ml-md-3 justify-content-center">
                            <button class="btn btn-info rounded" type="submit">Search</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
{% load static %}

{% if posts %}
{% for post in posts %}
<div class="row job-post">
    <div class="col col-5 col-sm-6 col-md-4 col-lg-6 d-flex align-items-center">
        <a href="{{ post.get_absolute_url }}" class="text-dark">{{ post.title }}</a>
    </div>
    <div class="col col-md-3 offset-md-1 col-lg-3 offset-lg-1 d-none d-md-flex align-items-center">
        <a href="{% url 'location_job_list' %}?in={{ post.location }}" class="text-muted">{{ post.location }} - {{ post.date_created }}</a>
    </div>
    <div
        class="col col-5 offset-2 col-sm-3 offset-sm-3 col-md-3 offset-md-1 col-lg-2 offset-lg-0 d-sm-flex align-items-center">
        <a href="{% url 'employment_type_job_list' %}?type={{ post.employment_type }}"
            class="btn btn-outline-info">{{ post.employment_type }}</a>
    </div>
    <div class="row">
        <div class="col">
            <p><a href="{{ post.employer_fk.get_absolute_url }}" class="text-danger">{{ post.employer }}</a></p>
            <a href="{% url 'location_job_list' %}?in={{ post.location }}"
                class="d-block d-md-none pt-3 pb-1 text-muted">{{ post.location }}</a>
        </div>
    </div>
</div>

{% endfor %}
{% endif %}
{% endblock %}

{% block javascript %}
<!-- bootstrap-select javascript/stylesheets -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>

<!-- algolia location search script -->
<script src="https://cdn.jsdelivr.net/npm/places.js@1.17.0"></script>

<!-- jQuery autocomplete scripts/stylesheets -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" type="text/css" media="all" />
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>

<!-- static forms script -->
<script>
    var ALGOLIA_PUBLIC_APP_ID = "{{ ALGOLIA_PUBLIC_APP_ID }}";
    var ALGOLIA_PUBLIC_KEY = "{{ ALGOLIA_PUBLIC_KEY }}";
    var autocomplete_title_source = "{% url 'autocomplete_title_search' %}";
</script>
<script type="text/javascript" src="{% static 'js/forms.js' %}"></script>
{% endblock %}